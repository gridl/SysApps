<!DOCTYPE html>
<html>
  <head>
    <title>Sri Bhattacharya Rule</title>
    <style>
      .numbers{
        position:absolute;
        top:20%;
        left:5%;
        width:30%;
        height:50%;
        background:gray;
        text-align:center;
      }
      .output{
        position:absolute;
        top:20%;
        right:5%;
        width:500px;
        height:400px;
        background:black;
      }
      #oCanvas{

      }
      body{
        background:gray;
      }

    </style>
  </head>

  <body>
    <header>Check for Pythagoras triplets!</header>
    <div class="numbers" >
      <span>A&nbsp;</span><input type="text" onkeypress="return isNumber(event)" placeholder="x 1" id="x1" />&nbsp;
      <input type="text" onkeypress="return isNumber(event)" placeholder="y 1" id="y1" /><br/>
      <span>B&nbsp;</span><input type="text" onkeypress="return isNumber(event)" placeholder="x 2" id="x2" />&nbsp;
      <input type="text" onkeypress="return isNumber(event)" placeholder="y 2" id="y2" /><br/>
      <span>C&nbsp;</span><input type="text" onkeypress="return isNumber(event)" placeholder="x 3" id="x3" />&nbsp;
      <input type="text" onkeypress="return isNumber(event)" placeholder="y 3" id="y3" /><br/><br/>
      <input type="submit" value="check" onclick="hypo();" />
    </div>
    <div class="output">
      <canvas id="oCanvas" width="500px;" height="400px" >
        Your browser does not support the HTML5 canvas tag.
      </canvas>
    </div>


    <script type="text/javascript">
    window.requestAnimFrame = function(){
      return (
        window.requestAnimationFrame       ||        //adding browser compatibility
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame    ||
        window.oRequestAnimationFrame      ||
        window.msRequestAnimationFrame     ||
        function(callback){
          window.setTimeout(callback, 1000 / 60);
        }
      );
    }();
    var b,h,bgFlag,x=0,y=0,flag=0,anim;
    var c = document.getElementById("oCanvas");
    var ctx = c.getContext("2d");

      function hypo(){

        var x1= document.getElementById("x1").value;
        var x2= document.getElementById("x2").value;
        var x3= document.getElementById("x3").value;
        var y1= document.getElementById("y1").value;
        var y2= document.getElementById("y2").value;
        var y3= document.getElementById("y3").value;
        var n1=Math.sqrt(Math.pow(x1-x2,2)+Math.pow(y1-y2,2));
        var n2=Math.sqrt(Math.pow(x2-x3,2)+Math.pow(y2-y3,2));
        var n3=Math.sqrt(Math.pow(x3-x1,2)+Math.pow(y3-y1,2));

        //console.log(n1+" "+n2+" "+n3);

        var i;var num=[n1,n2,n3]; var pytha=false; var chk;

        for (i=0;i< num.length;i++){

          chk=check(num,i); // check if num[i] is hypotenuse

          if(chk)
          {
            pytha=true;
            drawTriangle(i,num); // num[i] is hypotenuse
            break;
          }
        }

        if(!pytha)
        drawTriangle(false,num);


      }



      function check(num,n){
        var res;
        switch(n){
          case 0:
              res=Math.sqrt(Math.pow(num[1],2)+Math.pow(num[2],2 ))
              if(res==num[n]){
                return true;

              }

          break;

          case 1:
              res=Math.sqrt(Math.pow(num[0],2)+Math.pow(num[2],2 ))
              if(res==num[n]){
                return true;

              }
          break;

          case 2:
                res=Math.sqrt(Math.pow(num[0],2)+Math.pow(num[1],2 ))
              if(res==num[n]){
                return true;

              }
          break;

        }

        return false;


      }

      function drawTriangle(pos,num){



        if(pos){
            switch(pos){
              case 0:
                      b=num[1];h=num[2];break;
              case 1:
                      b=num[0];h=num[2];break;
              case 2:
                      b=num[0];h=num[1];break;
            }
		
          animate();


          }

          else{
            ctx.clearRect(0,0,500,400);
            ctx.font = "30px Arial";
            ctx.fillStyle="red";
            ctx.textAlign="center";
            ctx.fillText("Not Pythagoras triplets!Try again!",250,200);
			cancelAnimationFrame(anim);		
	
          }

      }
      function animate(){

        if(!(flag%3))
        {

          ctx.clearRect(0,0,500,400);
          ctx.beginPath();

          ctx.moveTo(100,200);
          ctx.lineTo(100+x*35,200);
          ctx.lineTo(100+x*35,200-y*35);

          if(x<b && y==0)
          x+=0.1;
          if(y<h && x>=b)
          y+=0.1;

          ctx.strokeStyle = "blue";
          if(x>=b && y>=h)
         	 ctx.closePath();
          
          ctx.stroke();
          flag=1;
        }
        //}
         anim=requestAnimFrame(animate);

        flag++;

      }

    </script>




    <script>
    var isNumber= function(evt) {
      evt = (evt) ? evt : window.event;
      var charCode = (evt.which) ? evt.which : evt.keyCode;
      if (charCode > 31 && (charCode < 48 || charCode > 57)) {
        return false;
      }
      return true;
    };
    </script>
  </body>
</html>
